<div class="dashboard-container">
  <!-- Header -->
  <div class="chart-actions d-flex align-items-center gap-3">
    <!-- Data e Hora Atual -->
    <div class="current-date">
      <div class="date-container">
        <i class="fas fa-clock me-2"></i>
        {{ today | date: 'EEEE, MMMM d, y · h:mm:ss a' }}
      </div>
    </div>

    <!-- Botão Export -->
    <button class="btn btn-outline-primary btn-sm">
      <i class="fas fa-download me-2"></i>Export Data
    </button>
  </div>

  <!-- Welcome Section -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="welcome-section">
        <div class="row align-items-center">
          <div class="col-lg-8 mb-3 mb-lg-0">
            <div class="welcome-content">
              <h2>Welcome to Fresh Inventory!</h2>
              <p>
                Monitor your kitchen metrics, track inventory levels, and optimize your operations with our
                comprehensive dashboard.
              </p>
              <button class="btn btn-primary">
                View Reports
                <i class="fas fa-chart-bar ms-2"></i>
              </button>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="welcome-illustration text-center">
              <!-- Adjusted image size -->
              <img src="assets/Smart_Kitchen_Management.png" alt="Dashboard Illustration"
                class="welcome-img img-fluid rounded">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- KPI Cards -->
  <div class="row g-4">
    <!-- Revenue -->
    <div class="col-md-3">
      <div class="kpi-card">
        <div class="kpi-header text-success">
          <i class="fas fa-dollar-sign"></i>
          <h3>Revenue</h3>
        </div>
        <div class="kpi-value">{{ formatCurrency(financialMetrics.totalProfit) }}</div>
        <p class="kpi-detail text-muted">Net Profit: {{ formatCurrency(financialMetrics.netProfit) }}</p>
      </div>
    </div>

    <!-- Stock Levels -->
    <div class="col-md-3">
      <div class="kpi-card">
        <div class="kpi-header text-warning">
          <i class="fas fa-boxes"></i>
          <h3>Stock Levels</h3>
        </div>
        <div class="kpi-value">{{ ingredientMetrics.totalAvailableStock }}</div>
        <p class="kpi-detail text-muted">{{ ingredientMetrics.lowStockCount }} items low in stock</p>
      </div>
    </div>

    <!-- Customer Metrics -->
    <div class="col-md-3">
      <div class="kpi-card">
        <div class="kpi-header text-info">
          <i class="fas fa-users"></i>
          <h3>Customers</h3>
        </div>
        <div class="kpi-value">{{ customerMetrics.totalCustomersServed }}</div>
        <p class="kpi-detail text-muted">{{ customerMetrics.repeatCustomers }} returning</p>
      </div>
    </div>

    <!-- Waste Metrics -->
    <div class="col-md-3">
      <div class="kpi-card">
        <div class="kpi-header text-danger">
          <i class="fas fa-recycle"></i>
          <h3>Waste Control</h3>
        </div>
        <div class="kpi-value">{{ formatCurrency(wasteMetrics.totalWasteCost) }}</div>
        <p class="kpi-detail text-muted">{{ wasteMetrics.spoiledProductsCount }} items spoiled</p>
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="row g-4 mt-4">
    <!-- Revenue Trends -->
    <div class="col-lg-8">
      <div class="chart-card">
        <h3 class="chart-title">Revenue Trends</h3>
        <canvas baseChart [data]="revenueChartData" [options]="chartOptions" [type]="'line'"></canvas>
      </div>
    </div>

    <!-- Inventory Breakdown -->
    <div class="col-lg-4">
      <div class="chart-card">
        <h3 class="chart-title">Inventory Breakdown</h3>
        <canvas baseChart [data]="inventoryChartData" [options]="chartOptions" [type]="'doughnut'"></canvas>
      </div>
    </div>
  </div>

  <!-- Recent Activity and Recommendations -->
  <div class="row g-4 mt-4">
    <!-- Recent Activities -->
    <div class="col-lg-6">
      <div class="activity-card">
        <h3 class="section-title">Recent Activities</h3>
        <ul class="activity-list">
          <li><span class="activity-date">{{ today | date: 'MMM d, h:mm a' }}</span> 50 items restocked</li>
          <li><span class="activity-date">{{ today | date: 'MMM d, h:mm a' }}</span> Sold 20 portions of pasta</li>
          <li><span class="activity-date">{{ today | date: 'MMM d, h:mm a' }}</span> Discarded 5 spoiled items</li>
        </ul>
      </div>
    </div>

    <!-- Recommendations -->
    <div class="col-lg-6">
      <div class="recommendations-card">
        <h3 class="section-title">Recommendations</h3>
        <p class="recommendation">Consider increasing stock levels for {{ ingredientMetrics.lowStockCount }} critical
          items.</p>
        <p class="recommendation">Optimize pricing for the {{ dishMetrics.leastProfitableDish }}.</p>
        <p class="recommendation">Reduce waste by closely monitoring {{ wasteMetrics.spoiledProductsCount }} items.</p>
      </div>
    </div>
  </div>
</div>